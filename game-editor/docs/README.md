# Game Editor 项目文档

欢迎来到 Game Editor 项目文档中心！这里包含了项目的所有技术文档、架构分析和开发指南。

## 📚 文档目录

### 🏗️ 架构设计
- [**架构分析**](./ARCHITECTURE_ANALYSIS.md) - H5游戏编辑器的整体架构分析和最佳实践
- [**节点系统可行性报告**](./NODE_SYSTEM_FEASIBILITY_REPORT.md) - 详细的节点系统技术可行性分析
- [**编辑器界面重构总结**](./editor-ui-refactor.md) - 🆕 界面重构的完整技术文档
- [**架构图**](./architecture-diagrams.md) - 🆕 系统架构的可视化图表

### 🎮 游戏示例
- [**示例项目**](../examples/README.md) - 游戏示例和教程
- [**泡泡龙游戏**](../examples/001-refactor/README.md) - 完整的泡泡龙游戏实现

### 📖 开发指南
- [**快速开始**](../README.md) - 项目启动和基本使用
- [**快速参考**](./quick-reference.md) - 🆕 开发者快速查阅手册
- [**节点开发指南**](./NODE_DEVELOPMENT_GUIDE.md) - 如何开发自定义节点 *(待创建)*
- [**API 参考**](./API_REFERENCE.md) - 完整的 API 文档 *(待创建)*

## 🎯 核心概念

### 节点系统
Game Editor 采用基于节点的可视化编程系统，让用户可以通过连接节点来创建游戏逻辑，而无需编写代码。

**核心特性**：
- 🎨 **可视化编程** - 拖拽节点，连接端口
- ⚡ **实时预览** - 修改立即看到效果
- 🔧 **模块化设计** - 节点可复用和组合
- 📱 **跨平台** - 基于Web技术，无需安装
- 🏗️ **现代化架构** - 🆕 组件化UI，事件驱动，层级管理

### 支持的游戏类型
- ✅ **Puzzle 游戏** - 泡泡龙、三消、连连看等
- ✅ **Platformer 游戏** - 跳跃、跑酷类游戏
- ✅ **Shooter 游戏** - 射击、飞机大战等
- ✅ **Racing 游戏** - 赛车、竞速类游戏
- ⚠️ **RPG 游戏** - 部分支持，复杂状态管理有限制
- ❌ **3D 游戏** - 暂不支持，需要Three.js集成

## 🚀 技术栈

### 核心框架
- **节点编辑器**: [LiteGraph.js](https://github.com/jagenjo/litegraph.js)
- **渲染引擎**: [PixiJS v8](https://pixijs.io/)
- **构建工具**: [Vite](https://vitejs.dev/)
- **开发语言**: [TypeScript](https://www.typescriptlang.org/)
- **UI架构**: 🆕 模块化组件系统 + 事件驱动

### 开发工具
- **代码生成**: AST操作、模板引擎
- **热重载**: iframe隔离、消息通信
- **调试**: Chrome DevTools Protocol
- **测试**: Jest + Playwright

## 📊 项目状态

### 已完成 ✅
- [x] 基础节点系统架构
- [x] 节点编辑器界面
- [x] 🆕 **编辑器界面重构** - 模块化UI架构
- [x] 🆕 **统一层级管理** - Z-Index管理系统
- [x] 🆕 **响应式设计** - 桌面端和移动端适配
- [x] 基础渲染节点
- [x] 容器和场景节点
- [x] 资源管理节点
- [x] 事件处理节点
- [x] 实时预览框架
- [x] 代码生成系统

### 进行中 🔄
- [ ] 实时预览优化
- [ ] 错误处理完善
- [ ] 性能优化
- [ ] 更多节点类型

### 计划中 📋
- [ ] 插件系统
- [ ] 团队协作
- [ ] 云端存储
- [ ] 移动端支持

## 🛠️ 开发指南

### 环境设置
```bash
# 克隆项目
git clone <repository-url>
cd game-editor

# 安装依赖
pnpm install

# 启动开发服务器
pnpm run dev
```

### 创建自定义节点
1. 在 `src/pixi-nodes/` 目录下创建新节点文件
2. 继承 `BaseNode` 类
3. 实现必要的生命周期方法
4. 在 `src/nodes.ts` 中注册节点
5. 在 `src/nodesConfig.ts` 中添加节点配置

### 贡献指南
1. Fork 项目
2. 创建功能分支
3. 提交代码变更
4. 创建 Pull Request

## 📈 性能指标

### 编译性能
- **简单游戏编译时间**: < 100ms
- **热重载时间**: < 200ms
- **运行时性能**: 接近手写代码的90%

### 支持规模
- **节点数量**: 支持1000+节点
- **游戏复杂度**: 支持中等复杂度游戏
- **并发用户**: 支持100+并发编辑

## 🎯 路线图

### 短期目标 (1-2月)
- [ ] 完善实时预览系统
- [ ] 添加更多游戏节点
- [ ] 优化用户界面
- [ ] 完善错误处理

### 中期目标 (3-6月)
- [ ] 实现插件系统
- [ ] 添加团队协作功能
- [ ] 支持复杂游戏类型
- [ ] 建立开发者社区

### 长期目标 (6-12月)
- [ ] 云端存储和同步
- [ ] 移动端编辑器
- [ ] 3D游戏支持
- [ ] 商业化准备

## 🤝 社区

### 获取帮助
- 📖 **文档**: 查看本文档
- 💬 **讨论**: GitHub Discussions
- 🐛 **问题**: GitHub Issues
- 📧 **邮件**: 联系开发团队

### 参与贡献
- 🔧 **代码贡献**: 提交 Pull Request
- 📝 **文档贡献**: 改进文档
- 🎨 **设计贡献**: 提供UI/UX建议
- 🧪 **测试贡献**: 报告Bug和测试

## 🎨 界面重构亮点 (2025-01-20)

### ✨ 重构成果
我们完成了编辑器界面的全面重构，从单一文件架构升级为现代化的模块化系统：

**🏗️ 架构升级**
- **模块化组件系统** - 每个UI组件完全独立，易于维护和扩展
- **统一事件总线** - EventBus实现松耦合的组件通信
- **层级管理系统** - ZIndexManager统一管理所有组件的z-index，彻底解决层级冲突

**�️ 稳定性保障**
- **Topbar保护机制** - 自动监控和修复，确保核心工具栏永不消失
- **样式隔离策略** - 每个组件独立样式，避免全局污染
- **错误处理机制** - 分层错误处理，组件级降级，不影响整体功能

**📱 用户体验优化**
- **响应式设计** - 桌面端和移动端一致的用户体验
- **浮动预览系统** - 紧贴右侧的游戏预览窗口，最大化利用空间
- **统一交互模式** - 预览按钮统一放置在右下角，符合用户习惯

### 📚 技术文档
- [**完整重构文档**](./editor-ui-refactor.md) - 300+行详细技术文档
- [**快速参考手册**](./quick-reference.md) - 开发者必备工具
- [**架构可视化图**](./architecture-diagrams.md) - Mermaid图表展示系统架构

### 🔧 开发者工具
```javascript
// 浏览器控制台中的调试工具
window.editor.ZIndexManager.validateZIndexLayers();  // 验证层级
window.editor.ZIndexManager.fixTopbarVisibility();   // 修复topbar
window.editor.uiManager.getAllPanelStates();         // 查看面板状态
```

这次重构为编辑器奠定了坚实的技术基础，具备了现代化编辑器应有的**稳定性、健壮性、可扩展性**。

## �📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](../LICENSE) 文件了解详情。

---

**最后更新**: 2025年1月20日
**文档版本**: v1.1 (新增界面重构文档)
**维护者**: Game Editor 开发团队